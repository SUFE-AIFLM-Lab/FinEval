<div align="center">
  <img src="docs/zh_cn/_static/image/FinEval.jpg" width="500px"/>
  <br />
  <br />

[![license](https://img.shields.io/badge/License-Apache--2.0-blue.svg)](https://github.com/SUFE-AIFLM-Lab/FinEval/blob/main/LICENSE)

[🌐网站](https://fineval.readthedocs.io/zh_CN/latest/) |
[🤗Hugging Face](https://huggingface.co/datasets/SUFE-AIFLM-Lab/FinEval) |
[📃论文](https://arxiv.org/abs/2308.09975)

[English](/README.md) | 简体中文
</div>

欢迎来到**FinEval**

大型语言模型（LLMs）在各种自然语言处理任务中展现出卓越的性能，然而它们在更具挑战性和领域特定的任务中的功效仍然未被充分探索。本文介绍了FinEval，一个专门为LLMs中的金融领域知识而设计的基准测试。

FinEval金融领域评测基准依据定量的基本方法，通过长期客观调研总结和严格的人工筛选，利用多项选择题、主客观简答题、推理规划和检索问答等8342道多种与实际应用场景高度一致的题型，包括了金融学术知识、金融行业知识、金融安全知识以及金融智能体。为了确保对模型性能进行全面的评估，FinEval结合Accuracy、Rouge-L以及专家评测细则等主客观评分标准，采用zero-shot和few-shot方法进行评测。通过在FinEval上评估最先进的大语言模型，结果显示只有GPT-4在不同提示设置下达到了超过70%的平均准确率，表明大语言模型在金融领域知识方面具有显著的增长潜力。我们的工作提供了一个更全面的金融知识评估基准，利用了模拟考试数据与一些开放性试题，涵盖了广泛的大语言模型评估范围。


# 目录
## FinEval
- [金融学术知识](#金融学术知识)
- [金融行业知识](#金融行业知识)
- [金融安全知识](#金融安全知识)
- [金融智能体](#金融智能体)
- [性能排行榜](#性能排行榜)
## 使用说明
- [安装](#安装)
- [评测](#评测)
- [准备数据集](#准备数据集)
- [支持新数据集和模型](#支持新数据集和模型)
- [如何提交](#如何提交)
- [引用](#引用)

## FinEval
### 金融学术知识

FinEval一代金融学术知识是包含高质量多项选择题的集合，涵盖金融、经济、会计和证书等领域。它包括4661个问题，涵盖了34个不同的学术科目。FinEval一代提供了一个更全面的金融学术知识能力评估基准，利用了模拟考试数据，涵盖了广泛的大语言模型评估范围。

<div align="center">
  <img src="docs/en/_static/image/subjects.png" width="1000px" height="475px"/>
  <br />
  <br /></div>

以下是金融学术知识的数据示例：

```text
问题：甲公司2015年年初的所有者权益总额为2000万元，2015年亏损200万元，2016年亏损300万元，2017年到2019年的税前利润每年均为0，2020年公司实现税前利润800万元。按净利润的10%提取法定盈余公积。公司董事会提出2020年度分配利润50万元，但尚未提交股东大会审议。假设公司2015年至2020年不存在除弥补亏损的其他纳税调整和其他导致所有者权益变动的事项，适用企业所得税税率为25%。则甲公司2020年年末所有者权益总额为万元。
A.2300  B.2145  C.2225  D.2175
答案：C
```
### 金融行业知识

FinEval二代金融行业知识是一个包含高质量文本问答题的集合，涵盖投顾、投研、运营等领域。它包括1446个问题，涵盖了10个不同的行业应用场景。FinEval二代提供了一个更全面的金融行业知识能力评估基准，利用财经网站数据爬取+GPT-4生成的方式构造数据集，评估不同应用场景下大语言模型的泛化能力。

<div align="center">
  <img src="docs/en/_static/image/v2.png" width="600px" height="250px"/>
  <br />
  <br /></div>
以下是金融行业知识的数据示例：


客观简答题

```text
问题：请判断以下投资者的情绪属于消极情绪、中立、积极情绪中的哪一类，不需要分析，只需指出属于哪一类：根据以往的游戏开发经验，互动剧游戏研发制作的两大重点分别是内容拍摄制作和后续游戏化开发。在内容拍摄制作环节1天云动已经有了深厚的短剧储备，未来这些短剧储备具备快速完成向互动剧游戏转化的条件。对于后续的游戏化而言在公司自研的编辑器加持下，互动环节开发相对容易。同时，公司也在布局A生成脚本、AI视频剪辑、AI生成互动内容等技术，在AIGC技术的加持下，剧情生成、短剧开发和游戏化开发效率提升，更有可能形成工业化的制作流程体系。
答案：消极
```
主观问答题

```text
问题：我应该如何评估债券投资的风险和回报？
答案：评估债券投资的风险和回报是一个关键的投资决策过程，以下是一些建议：
1. 多样化投资组合：分散投资于不同信用评级、行业和到期期限的债券，以降低整体投资组合的风险；
2. 关注财务健康：选择那些财务状况良好、信用评级较高的债券，以降低信用风险；
3. 考虑市场环境：在宏观经济环境较好时，可能更偏向于低风险、低回报的债券：而在经济疲软时，可能需要更关注保值和较高回报；
4. 定期重新评估：定期审查投资组合，关注市场和经济的变化，根据需要调整投资组合以适应不断变化的环境。
最终，债券投资的选择应该与你的投资目标、风险承受能力和投资时间视角相一致。记住，投资是一项长期的活动，理性的决策和谨慎的分析是成功投资的关键。
```

### 金融安全知识
FinEval三代金融安全知识利用1640条专有多项选择题对金融大模型安全能力进行评测。金融安全能力评测要求大模型从应用安全、密码学、恶意软件分析、记忆安全以及网络安全等十一个维度与场景，处理不同情况下的金融安全任务。

<div align="center">
  <img src="docs/en/_static/image/v3.png" width="700px" height="600px"/>
  <br />
  <br /></div>

以下是金融安全知识的数据示例：

```text
问题：为了防止敏感用户数据暴露给设备上的其他应用程序，Android应用程序开发人员在选择数据存储方式时应避免使用哪种方法？
A: 使用MODE_PRIVATE的SharedPreferences存储用户偏好和设置。
B: 在应用程序可访问的未加密SQLite数据库中存储用户凭据。
C: 实现SQLCipher加密包含敏感用户信息的SQLite数据库。
D: 在Android Keystore系统中保存加密的用户数据。
答案：B
```

### 金融智能体
FinEval四代金融智能体评测通过三大核心能力，八大任务指标共607条中文原生数据进行评测，旨在评估大模型在工具应用，推理规划以及长程记忆方面的能力。通过模拟金融环境中的真实场景，该框架旨在全面评估和促进AI Agent在处理高度专业化金融相关场景任务中的表现。具体而言，我们当前主要评估LLM在其中七大方面的性能表现

<div align="center">
  <img src="docs/en/_static/image/v4.png" width="500px" height="480px"/>
  <br />
  <br /></div>

以下是七大方面的数据示例：

API调用：测试AI Agent根据提供的API文档精确调用API的能力，包括理解API功能和适应复杂的调用参数。

```text
问题：yfinance 是一个Python库，用于从Yahoo Finance获取全球金融市场数据。它提供了访问和下载股票、指数、债券、货币对和大宗商品等各类金融产品的历史和实时数据。特别地，yfinance 还支持获取股票市场的市场深度数据，包括买卖盘深度、成交量和成交价等。现在，你的任务是使用 yfinance 获取Netflix（股票代码：NFLX）和迪士尼（股票代码：DIS）在过去一年的每月平均成交量。请问根据API描述，你会怎么操作来实现这个需求？
答案: 要使用 `yfinance` 获取 Netflix（股票代码：NFLX）和迪士尼（股票代码：DIS）在过去一年的每月平均成交量，你可以按照以下步骤操作：
1.**安装和导入 yfinance**: 确保已安装 `yfinance` 库。如果尚未安装，可以通过 pip 安装。然后导入 `yfinance` 库。
pip install yfinance
import yfinance as yf
2.**获取股票数据**: 使用 `yfinance` 来获取 Netflix 和迪士尼的股票数据。需要指定获取数据的时间范围为过去一年。
from datetime import datetime, timedelta
# 获取今天的日期并计算一年前的日期
today = datetime.today()\none_year_ago = today - timedelta(days=365)
# 使用 yfinance 获取特定时间段内的股票数据
nflx = yf.Ticker(\"NFLX\")\ndis = yf.Ticker(\"DIS\")
nflx_data = nflx.history(start=one_year_ago, end=today)\ndis_data = dis.history(start=one_year_ago, end=today)
3.**提取月度平均成交量**: 对获取到的历史数据进行处理，以提取每月的平均成交量。这可以通过重采样数据到月度频率，并计算每月的平均成交量来实现。
import pandas as pd
# 重采样到月度，并计算每月的平均成交量
monthly_avg_volume_nflx = nflx_data['Volume'].resample('M').mean()
monthly_avg_volume_dis = dis_data['Volume'].resample('M').mean()
4.**输出结果**: 输出每月的平均成交量。
print(\"Netflix Monthly Average Volume:\")
print(monthly_avg_volume_nflx)
print(\"\\nDisney Monthly Average Volume:\")\nprint(monthly_avg_volume_dis)
这将给你 Netflix 和迪士尼过去一年中每月的平均成交量。请在你的本地环境中尝试这些代码，如果在执行过程中遇到任何问题，或需要进一步的帮助，请随时告诉我！"
```

API检索：测试AI Agent在一系列可能的API中根据当前给定任务合理选择、组织、调用API并分析结果的能力。

```text
下面是一些追问。你将看到一个过去的问题记录，以及一个关于这个问题的追问。请在原始问题的基础上思考追问问题。你只需要按照追问的指令进行回答即可。原始问题:你正在开发一个金融资讯应用，需要为用户提供最新的股票市场动态。你有以下API可以调用来实现功能:
GetStockNews API(获取股票新闻API): 获取特定股票的最新新闻。参数包括stock_symbol(股票符号，字符串)。
GetMarketTrends API(获取市场趋势API): 获取当前的市场趋势分析。参数包括market_segment(市场细分，字符串)。
GetStockPrice API(获取股票价格API): 获取特定股票的当前价格。参数包括stock_symbol(股票符号，字符串)。
SubscribeToAlerts API(订阅警报API): 为特定股票设置价格警报。参数包括stock_symbol(股票符号，字符串)，price_threshold(价格阈值，浮点数)。
你的用户对科技股特别感兴趣，并希望获得AAPL和MSFT股票的最新新闻以及它们的当前价格。请详细描述你的操作过程。
请根据你的需求，选择适合的API以及生成对应的参数，详细描述要达到你的目标所需要调用API的步骤以及需要传入的参数值。
追问：用户对AAPL股票非常满意，并希望在其价格下降到150美元以下时收到警报。你应该怎样操作？
答案: 为了让用户在AAPL股票价格下降到150美元以下时收到警报，你应该调用SubscribeToAlerts API来设置一个价格警报。以下是具体的操作步骤和所需参数：
- **调用SubscribeToAlerts API设置AAPL股票的价格警报**
- **API**: `SubscribeToAlerts`
- **参数**:- `stock_symbol`: `\"AAPL\"` (股票符号为AAPL)\n- `price_threshold`: `150` (价格阈值设为150美元)
调用此API后，每当AAPL的股票价格下降到150美元或以下时，用户将收到警报。这样，用户可以及时了解股票价格的变化，并根据自己的投资策略做出相应的决策。
请确保在实施这一功能时，用户界面清晰地说明了警报的设置和触发条件，以便用户可以根据自己的需要轻松地管理这些警报。
```
多文档问答：评估AI Agent在处理多个相关文档时，如何有效提取和整合信息以回答复杂的金融问题。

```text
阅读下列文档，根据文档回答下面的问题。
文档1:《全球经济一体化的影响》 全球经济一体化是指世界各国经济的相互依存和联系日益加深，这主要体现在贸易自由化、资本流动、技术转移等方面。经济一体化对促进全球贸易增长、提高生产效率和促进资源有效配置具有重要作用。
文档2:《货币政策的工具与效果》 货币政策是中央银行控制货币供应量、调节市场利率以影响经济活动的一种重要手段。通过调节银行存款准备金率、操作市场利率和公开市场操作等手段，货币政策能够影响通货膨胀率、就业率和经济增长速度。
文档3:《数字货币的发展趋势》 随着区块链技术的发展，数字货币如比特币、以太坊等逐渐成为投资和交易的热门工具。数字货币的匿名性、去中心化特点使其在某些场合比传统货币更具优势，但同时也面临监管、安全等挑战。
文档4:《国际贸易中的风险管理》 国际贸易中存在货币汇率风险、信用风险、政治风险等多种风险。企业在参与国际贸易时需要采取有效的风险管理措施，如货币套期保值、信用保险、多元化市场策略等，以降低潜在的损失。\n\n文档5:《投资银行的角色和功能》 投资银行在资本市场中扮演着重要角色，它们为公司提供股票和债券发行、并购咨询、资产管理等服务。投资银行通过桥接资本需求和供给，促进资本市场的效率和流动性。
问题: 在这样的背景下，投资银行如何调整其服务和策略来适应数字货币的兴起和国际贸易中的不确定性？",
答案: 在全球经济一体化深化及数字货币兴起的背景下，投资银行可能需要调整其服务和策略以适应市场的新需求和不确定性，主要方式包括：
1. **拥抱数字货币和区块链技术**：考虑到文档3提到的数字货币的发展趋势，投资银行可以通过集成区块链技术和数字货币到其产品和服务中来吸引更多的客户。例如，他们可以提供数字货币交易、托管服务，或者发行基于区块链的金融工具，如数字债券和股票【文档3†数字货币的发展趋势】。
2. **发展新的风险管理工具**：面对文档4提及的国际贸易中的货币汇率风险、信用风险和政治风险，投资银行需要开发新的风险管理工具和策略。这可能包括使用先进的数据分析和人工智能技术来更好地预测市场变动，并为客户提供定制化的套期保值和风险对冲解决方案【文档4†国际贸易中的风险管理】。
3. **增强跨境金融服务能力**：鉴于全球经济一体化带来的挑战，如文档1所述，投资银行需要加强其跨境金融服务的能力，以便更好地服务于在全球范围内运营的企业。这可能包括提供跨境支付、融资、以及货币兑换等服务，以帮助企业更有效地管理其国际业务和资金流【文档1†全球经济一体化的影响】。
4. **适应监管变化**：随着数字货币和全球贸易环境的变化，监管框架也在不断演变。投资银行需要密切关注相关的法律和监管政策变化，确保其服务和操作符合新的监管要求，同时也能够为客户提供关于如何在变化的监管环境中保持合规的咨询服务。
5. **加强教育和咨询服务**：考虑到数字货币和全球经济一体化的复杂性，投资银行可以通过提供教育和咨询服务来帮助客户更好地理解这些新兴领域的机会和风险。这不仅可以增强客户的信任和忠诚度，还可以帮助银行发现新的业务机会。
通过这些调整，投资银行不仅能够更好地应对数字货币的兴起和国际贸易中的不确定性，还可以利用这些变化作为促进创新和增长的机会。
```

长程对话：评估AI Agent在涉及金融问题的长时间对话中，对信息的概括、抽取、理解和评价能力。此任务考查智能体在维持对话连贯性的同时，如何深入分析和回应涉及复杂金融概念的查询，展示其对金融话题的深刻理解和处理复杂对话动态的能力。

```text
对话
用户: 我们公司正探索使用物联网（IoT）技术来发展智能家居保险产品。考虑到物联网技术的特性，我们应如何设计这类保险产品以最大化客户价值和公司利润？
BOT: 利用物联网技术开发智能家居保险产品时，一个关键策略是通过实时数据监控来提前识别和预防风险。例如，可以使用家中的传感器数据来监测火灾、水泄漏或者盗窃等风险。基于这些数据，保险产品可以提供动态定价模型，根据客户的实际风险暴露调整保费。此外，还可以提供定制化的风险预防建议和紧急响应服务，增加客户的黏性和满意度。
用户: 在收集和使用客户数据时，我们需要注意哪些隐私和安全问题？
BOT: 在收集和使用客户数据时，确保数据的隐私和安全是至关重要的。需要遵循数据保护法律法规，如GDPR，在收集数据前获取客户的同意，并清晰地说明数据如何被收集、存储和使用。同时，采用加密和安全传输技术保护数据安全，防止数据泄露或被未授权访问。定期进行安全审计和漏洞扫描，以确保系统的安全性。
用户: 针对智能家居保险产品，我们如何处理大量的实时数据并将其转化为可操作的洞察？
BOT: 处理和分析大量实时数据，需要建立强大的数据处理和分析能力。可以采用云计算和边缘计算技术来处理数据的收集和初步分析，减轻中心服务器的负担。利用大数据分析和机器学习算法，如异常检测和预测建模，将数据转化为风险预警和个性化建议。建立数据可视化仪表板，帮助决策者快速理解数据洞察和作出响应。
用户: 面对技术迅速发展和市场需求变化，我们如何确保产品的快速迭代和持续创新？
BOT: 确保产品的快速迭代和持续创新，需要建立灵活的开发和运营流程。采用敏捷开发方法，快速响应市场变化和客户需求。鼓励跨部门合作和知识共享，利用客户反馈和市场研究指导产品创新。同时，持续关注新兴技术和行业趋势，通过合作伙伴关系和技术试点项目，探索新技术在保险产品中的应用可能。

问题：在对话中，为了开发智能家居保险产品，他们提到了利用哪种技术来提前识别和预防风险？
答案: 在对话中，为了开发智能家居保险产品并提前识别和预防风险，他们提到了利用物联网（IoT）技术中的实时数据监控。这包括使用家中的传感器数据来监测火灾、水泄漏或者盗窃等风险。
```

思维链推理：测试AI Agent在面对复杂的金融问题时，是否能通过逐步的逻辑推理来构建解答路径，展示其深度分析和推理能力。

```text
问题：标的资产为同一股票的欧式看涨期权和欧式看跌期权，其执行价格均为48元，期限3个月，年无风险利率为12%，目前该股票的价格为40元，看涨期权价格为8.5元，则看跌期权的价格为（）元。",
答案: 解题步骤：
要计算看跌期权的价格，我们可以使用看涨期权和看跌期权之间的关系，这种关系通过普特-卡尔定理（Put-Call Parity）表达，适用于欧式期权。普特-卡尔定理说明了在无套利条件下，看涨期权和看跌期权的价格之间的关系，公式为：
C + Ke^{-rt} = P + S
其中：C是看涨期权的价格。K是期权的执行价格。r是年无风险利率，以小数形式表示。t是期权的期限，以年为单位。P是看跌期权的价格。S是当前股票的价格。
给定的条件是：
- 看涨期权价格 C = 8.5 元。
- 执行价格 K = 48 元。
- 年无风险利率 r = 12% = 0.12 。\n
- 期限 t = 3 个月 = \frac{3}{12} 年。
- 当前股票价格 S = 40 元。
我们可以将这些值代入普特-卡尔定理公式中，以求解看跌期权的价格P。
看跌期权的价格为15.08元。
```
任务规划：评估AI Agent在面对给定的现实金融场景任务时，其分析、拆解、规划和处理的能力，确保其在实际操作中的高效性和准确性。

```text
问题：筹办金融科技与全球经济一体化论坛】预计300人参与，预算55万元，时间四个月，探讨金融科技在全球经济一体化中的作用和挑战。
答案: 筹办一个关于金融科技与全球经济一体化的论坛是一个重要且具有挑战性的项目。考虑到您的预算、参与人数和时间框架，以下是一些关键的规划步骤和建议：
### 1. 目标和议程设定
- 明确论坛的主要目标和预期成果。
- 设定具体的议程，包括主题演讲、小组讨论、互动研讨会等。
- 邀请金融科技和全球经济一体化领域的专家、学者和业界领袖作为演讲嘉宾。
### 2. 场地和日期选择
- 选择一个可以容纳至少300人的场地，确保有足够的会议室和休息空间。
- 考虑到时间框架为四个月，应尽早预定场地，并确保日期适合大多数嘉宾。
### 3. 预算规划
- 55万元的预算需要合理分配于场地租赁、嘉宾邀请（可能包括差旅和住宿费用）、宣传材料、技术支持、餐饮服务等。
- 保留一部分预算用于不可预见的支出。
### 4. 宣传和招募参与者
- 制定一套全面的宣传计划，包括社交媒体、行业合作伙伴、专业论坛等渠道。
- 开放在线报名，提供早鸟票和团体票优惠以吸引更多参与者。
### 5. 技术和后勤安排
- 确保会场有稳定的网络连接，以支持演示和在线直播。
- 安排专业的音频和视频设备，确保所有演讲和讨论都能被清晰记录和传播。
### 6. 跟进和评估
- 会后收集反馈，评估论坛的影响和效果。
- 考虑制作会议记录和总结报告，以供未来参考。
此外，考虑到当前全球经济形势和金融科技的快速发展，论坛可以探讨的关键话题可能包括数字货币、跨境支付、区块链技术在金融服务中的应用、金融监管科技（RegTech）等。
确保从现在开始就有一个详细的时间线和责任分配表，以便各个团队成员明确自己的任务和截止日期。成功筹办此类论坛需要团队的紧密合作和高效执行。
```

检索增强：考察AI Agent如何从外部知识库中检索相关信息，以增强其生成准确和相关答案的能力。

```text
1.作为一名金融领域专家，请根据材料回答下面的问题。
材料：【爱立信与欧洲投资银行签署4.2亿欧元融资协议】爱立信1月26日宣布与欧洲投资银行（EIB）签署两项为期7年、总额达4.2亿欧元的融资协议，其中2.5亿欧元已于2023年12月支付。根据声明，贷款将用于资助爱立信2023年到2025年间对增强型无线技术研发的部分投资，以及强化该公司的资产负债表和财务灵活性。
问题：爱立信与欧洲投资银行签署融资协议，这对爱立信的研发和财务策略将有何影响？回答字数在100字以内
答案：爱立信与欧洲投资银行的融资协议将为公司提供关键资金，支持其在增强型无线技术上的研发活动，有助于巩固其在通信技术领域的领先地位。此外，该协议将增强爱立信的财务灵活性和资产负债表，为未来的战略投资和运营提供更大的财务安全。

2.作为一名金融领域专家，请根据材料回答下面的问题。
材料：【印度人工智能创企Krutrim完成5000万美元融资 成该国首家AI独角兽】印度企业家、印度网约车平台Ola创始人巴维什·阿加瓦尔（Bhavish Aggarwal）创办的人工智能创企Krutrim宣布完成经纬印度牵头的5000万美元融资，公司估值都达到10亿美元。Krutrim表示，推出大型语言模型仅一个月后，该公司就成为印度首家估值达10亿美元的人工智能创企。Krutrim在梵语中意为“人工”，该公司还在开发数据中心，最终目标是为AI生态系统制造服务器和超级计算机。
问题：Krutrim成为印度首家估值达10亿美元的AI创企，这对印度及全球AI行业意味着什么？回答字数在100字以内",
答案：Krutrim成为印度首家AI独角兽，标志着印度在全球AI领域的崛起和潜力。这不仅展示了印度AI技术和创新能力的增长，还可能吸引更多投资，促进当地AI生态系统发展，加速全球AI技术的多样化和创新。
```


### 性能排行榜

下面是我们评估模型在各部分试题上的平均准确率(%)以及平均相似度(%)。每个类别下的平均准确率是该类别下所有科目或场景的平均准确率，最后一列是模型在所有学科或场景上的平均准确率或平均相似度。此外，在两种Prompt设置下，我们只给出了所有学科或场景平均准确率或平均相似度最高的设置结果。

一、金融学术知识评测结果(平均准确率(%))

| Model                  | Size    | Finance | Economy | Accounting | Certificate | Average |
|------------------------|---------|:-------:|:-------:|:----------:|:-----------:|:-------:|
| GPT-4                  | unknown |  67.5   |  68.1   |    63.6    |    68.6     |  66.9   |
| Qwen-14B-Chat          | 14B     |  60.3   |  61.7   |    55.9    |    60.9     |  59.7   |
| XuanYuan-70B-Chat      | 70B     |  58.5   |  57.8   |    55.8    |    62.5     |  58.8   |
| InternLM2-20B-Chat     | 20B     |  60.0   |  60.9   |    48.7    |    59.1     |  57.1   |
| ChatGPT                | 175B    |  59.3   |  54.1   |    48.9    |    55.7     |  54.6   |
| Baichuan2-13B-Chat     | 13B     |  50.9   |  52.5   |    45.8    |    55.0     |  51.1   |
| ChatGLM3-6B            | 6B      |  47.7   |  47.9   |    38.4    |    47.6     |  45.4   |
| DISC-FinLLM            | 13B     |  50.1   |  44.6   |    38.3    |    46.9     |  45.2   |
| moss-moon-003-sft      | 16B     |  34.4   |  36.2   |   29.3     |    32.9     |  33.1   |
| FinGPTv3.1             | 6B      |  28.9   |  27.7   |    27.3    |    34.2     |  29.8   |


在参与评估10个模型中，GPT-4表现出了卓越的能力，平均准确率超过60%，并且在其他所有独立类别中均表现最佳。同时，Qwen-14B-Chat以及XuanYuan-70B-Chat以及InternLM2-20B-Chat等国产开源模型也表现出色。此外，从模型大小方面来看，更大的模型也代表了相对更强的能力。

二、金融行业知识评测结果(平均相似度(%))

客观简答题

FTX:金融文本分类，FSA:金融情感分析，RE:关联关系抽取，FEE:金融事件抽取，NEE:负面实体抽取，CEE:因果事件抽取

| Model                  | Size    |   FTX   |   FSA  |   RE   |  FEE   |  NEE   |  CEE    | Average |
|------------------------|---------|:-------:|:------:|:------:|:------:|:------:|:-------:|:-------:|
| GPT-4                  | unknown |  99.1   |  91.7  |  92.6  |  72.8  |  94.2  |  62.1   |  85.4   |
| ChatGPT                | 175B    |  98.9   |  91.0  |  90.0  |  64.9  |  93.8  |  60.9   |  83.3   |
| Baichuan2-13B-Chat     | 13B     |  94.7   |  82.6  |  75.6  |  67.8  |  91.2  |  62.3   |  79.0   |
| Qwen-14B-Chat          | 14B     |  97.4   |  82.9  |  80.0  |  60.5  |  90.4  |  56.4   |  77.9   |
| XuanYuan-70B-Chat      | 70B     |  94.7   |  72.5  |  82.2  |  55.9  |  88.3  |  58.9   |  75.4   |
| InternLM2-20B-Chat     | 20B     |  61.6   |  79.4  |  87.8  |  64.3  |  91.3  |  63.1   |  74.6   |
| DISC-FinLLM            | 13B     |  73.4   |  64.1  |  74.4  |  63.8  |  77.1  |  62.2   |  69.2   |
| ChatGLM3-6B            | 6B      |  80.0   |  84.0  |  22.2  |  69.4  |  91.2  |  56.5   |  67.2   |
| moss-moon-003-sft      | 16B     |  80.0   |  88.9  |  23.3  |  66.1  |  85.0  |  37.0   |  63.9   |
| FinGPTv3.1             | 6B      |  60.3   |  27.7  |  20.0  |  31.3  |  72.5  |  36.7   |  44.2   |

主观问答题

FTS:金融文本摘要，FCP:金融客户画像，MSR:营销话术推荐，IA:投资建议

| Model                  | Size    |  FTS    | FCP     |    MSR     |      IA     | Average |
|------------------------|---------|:-------:|:-------:|:----------:|:-----------:|:-------:|
| GPT-4                  | unknown |  35.2   |  79.8   |    85.7    |    99.6     |  75.1   |
| ChatGPT                | 175B    |  34.1   |  76.1   |    84.0    |    98.6     |  73.2   |
| InternLM2-20B-Chat     | 20B     |  32.1   |  78.9   |    82.7    |    98.3     |  73.0   |
| Qwen-14B-Chat          | 14B     |  30.8   |  75.2   |    84.0    |    98.6     |  72.2   |
| XuanYuan-70B-Chat      | 70B     |  32.9   |  75.2   |    83.9    |    95.2     |  71.8   |
| Baichuan2-13B-Chat     | 13B     |  28.7   |  66.1   |    83.4    |    98.3     |  69.1   |
| ChatGLM3-6B            | 6B      |  30.1   |  60.6   |    83.6    |    98.7     |  68.3   |
| DISC-FinLLM            | 13B     |  27.2   |  59.6   |    85.4    |    97.0     |  67.3   |
| moss-moon-003-sft      | 16B     |  35.8   |  46.8   |    83.4    |    97.2     |  65.8   |
| FinGPTv3.1             | 6B      |  24.6   |  18.3   |    83.6    |    95.8     |  55.6   |

为更好的比较模型在不同任务上的能力，FinEval二代将所有题目分为客观问答题与主观问答题两类。与FinEval一代中的选择题不同，FinEval二代的客观问答题的答案由两三个字或词构成，大模型需要根据问题以及prompt中的答案集选出相应词语作为回答，因此客观问答题更能够体现大模型在不同金融应用场景下的指令跟随能力与理解能力。主观简答题通过GPT-4生成+人工筛查的方式构建问题答案，要求大模型进行长文本回答。因此主观简答题更能够模拟真实业务的交互情景。

左侧上表为客观问答题得分，下表为主观简答题得分。从结果可以看出，在文本问答类型的金融任务中，GPT系列表现最好，国产开源模型也有较好的表现，排名靠前者的平均得分与GPT系列差距不大，还有一定的进步空间。

三、金融安全知识评测结果(平均准确率(%))

App:应用安全，Cryp:密码防护，MA:恶意软件分析，MS:内存安全，NS:网络安全，Pent:渗透测试，Reve:逆向工程，Soft:软件安全，Syst:系统安全，Vul:漏洞识别，WS:网页安全

| Model              | Size    |   App   |   Cryp |   MA   |  MS    |  NS    |  Pent   | Reve    | Soft    | Syst    | Vul     | WS      | Average |
|--------------------|---------|:-------:|:------:|:------:|:------:|:------:|:-------:|:-------:|:-------:|:-------:|:-------:|:-------:|:-------:|
| GPT-4              | unknown |  86.0   |  83.0  |  82.2  |  78.0  |  78.4  |  82.4   |  81.0   |  83.0   |  83.8   |  81.0   |  81.1   |  81.8   |
| InternLM2-20B-Chat | 20B     |  70.0   |  62.0  |  66.3  |  56.0  |  65.7  |  71.5   |  72.0   |  64.0   |  70.7   |  70.0   |  65.7   |  66.7   |
| Qwen-14B-Chat      | 14B     |  70.0   |  59.0  |  62.4  |  60.0  |  68.6  |  68.1   |  72.0   |  64.0   |  74.7   |  69.0   |  64.7   |  66.6   |
| Baichuan2-13B-Chat | 13B     |  67.0   |  58.0  |  56.4  |  48.0  |  54.0  |  57.2   |  64.0   |  52.0   |  70.7   |  71.0   |  62.1   |  60.0   |
| ChatGPT            | 175B    |  66.0   |  46.0  |  51.5  |  49.0  |  43.1  |  56.7   |  55.0   |  49.0   |  57.6   |  58.0   |  53.9   |  53.3   |
| ChatGLM3-6B        | 6B      |  56.0   |  49.0  |  40.6  |  37.0  |  54.9  |  46.8   |  56.0   |  48.0   |  56.6   |  58.0   |  49.0   |  50.2   |
| XuanYuan-70B-Chat  | 70B     |  60.0   |  45.0  |  58.4  |  38.0  |  45.1  |  49.3   |  50.0   |  50.0   |  48.5   |  46.0   |  49.4   |  49.1   |
| DISC-FinLLM        | 13B     |  54.0   |  41.0  |  47.5  |  38.0  |  42.2  |  43.5   |  46.0   |  38.0   |  47.5   |  41.0   |  50.0   |  44.4   |
| moss-moon-003-sft  | 16B     |  29.0   |  28.0  |  25.7  |  27.0  |  13.7  |  22.5   |  22.0   |  21.0   |  17.2   |  20.0   |  28.4   |  23.1   |
| FinGPTv3.1         |  6B     |  10.0   |  10.0  |  10.1  |  9.0   |  15.7  |  10.7   |  12.0   |  10.0   |  11.1   |  17.0   |  10.5   |  11.2   |

从结果来看，GPT-4表现最好，在各种维度的安全相关任务中表现出色，平均准确度均在80%以上，表明GPT-4具有较强的安全能力，能够更加准确的识别交互过程中的安全隐患问题。在国产开源模型中，InternLM2-20B-Chat、Qwen-14B-Chat以及Baichuan2-13B-Chat表现较好，平均准确度均处于60%以上，但相比于GPT-4，国产开源模型的安全能力还需要进一步加强。相比于FinEval一二代的结果，可以看出FinEval三代的金融安全能力评测对大模型的泛化能力要求更高，对大模型在面临不同情况的安全问题时的评价更真实，更能反应大模型的能力，因此国内开源大模型在金融安全方面的能力还需要进一步提升。

四、金融智能体评测结果(平均相似度(%))

COT:思维链，RAG:检索增强，FT:金融任务，MC:长程对话，MD:多文档问答，API-I:API调用，API-R:API检索

| Model                  | Size    |   COT   |   RAG  |   FT   |  MC    |  MD    |  API-I  | API-R   | Weighted Average |
|------------------------|---------|:-------:|:------:|:------:|:------:|:------:|:-------:|:-------:|:----------------:|
| GPT-4                  | unknown |  70.8   |  92.4  |  99.8  |  86.4  |  92.5  |  93.3   |  93.1   |       89.4       |
| InternLM2-20B-Chat     | 20B     |  40.5   |  94.6  |  99.2  |  87.4  |  89.7  |  87.8   |  92.4   |       83.7       |
| ChatGPT                | 175B    |  42.0   |  90.8  |  95.6  |  87.2  |  70.8  |  91.2   |  91.4   |       80.1       |
| Qwen-14B-Chat          | 14B     |  37.7   |  91.8  |  96.8  |  85.7  |  80.3  |  82.7   |  85.8   |       79.5       |
| Baichuan2-13B-Chat     | 13B     |  37.8   |  81.4  |  99.8  |  80.2  |  86.4  |  79.6   |  87.7   |       78.2       |
| ChatGLM3-6B            | 6B      |  25.3   |  82.4  |  93.2  |  87.1  |  83.0  |  74.6   |  76.9   |       74.1       |
| moss-moon-003-sft      | 16B     |  14.6   |  61.6  |  80.0  |  81.4  |  46.4  |  72.9   |  50.0   |       57.6       |
| XuanYuan-70B-Chat      | 70B     |  20.0   |  80.2  |  34.2  |  87.3  |  66.5  |  70.4   |  70.1   |       59.6       |
| DISC-FinLLM            | 13B     |  12.6   |  89.4  |  68.8  |  80.0  |  34.5  |  47.3   |  45.0   |       54.7       |
| FinGPTv3.1             | 6B      |  4.6    |  48.2  |  42.8  |  81.1  |  36.4  |  25.3   |  30.0   |       38.8       |

从结果来看，GPT系列排名靠前，在各种维度的金融任务中表现出色，平均准确度均在80%以上，GPT-4更是接近90%。而国产开源模型中，InternLM2-20B-Chat表现更好，平均相似度超过80%，其能力已经超过ChatGPT，但离GPT-4还是有一定上升空间。XuanYuan-70B-Chat排名第八，相比于FinEval一二代的结果，可以看出FinEval四代的金融智能体评测要求大模型的高阶能力，因此还是非常具有挑战性的。

## 使用说明

目前我们只开源了最初版本的FinEval的所有数据，即FinEval金融学术知识方面的所有数据，为了保证评测结果的公平有效，我们更新了FinEval金融学术知识，构建了金融行业知识、金融安全知识与金融智能体，以上所有数据暂不开源。如需评测请联系zhang.liwen@shufe.edu.cn以得到授权，所有授权的机构或个人均会在[FinEval](https://github.com/SUFE-AIFLM-Lab/FinEval)说明。

以下说明适用于最初版本的FinEval，授权参与最新FinEval评测的个人或机构可以通过邮件中的说明文档进行评测。

### 安装

下面展示了快速安装的步骤，详细请参考[安装指南](docs/zh_cn/get_started/install.md)。

 ```python
    conda create --name fineval_venv python=3.8
    conda activate fineval_venv
 ```

```python
    git clone https://github.com/SUFE-AIFLM-Lab/FinEval
    cd FinEval
    pip install -r requirements.txt
```

### 准备数据集

使用Hugging Face datasets下载数据集。运行命令进行**手动下载解压**，在FinEval/code的项目目录下运行下面命令，数据集准备至FinEval/code/data目录下。

```text
cd code/data
wget https://huggingface.co/datasets/SUFE-AIFLM-Lab/FinEval/resolve/main/FinEval.zip
unzip FinEval.zip
```

数据集解压后，文件格式如下:

- -----data
  - ----dev：每个科目的dev集中包含五个示范实例以及few-shot评估提供的解释
  - ----val：val集主要用于自测模型得分，可直接得到分数
  - ----test：用于模型最终评估，test集的答案不会公开，需用户提交测评`submission.json`的结果，获得的分数参加最终排行榜


### 评测

请阅读[快速上手](/docs/zh_cn/get_started/quick_start.md)了解如何运行一个评测任务。

### 支持新数据集和模型

如果需要新加入数据集进行评测，请参考[支持新数据集](/docs/zh_cn/advanced_guide/new_dataset.md)。

如果需要加载新模型，请参考[支持新模型](/docs/zh_cn/advanced_guide/new_model.md)。

### 如何提交

测评结果保存位置为：`output_path=$PROJ_HOME/output_dir/${exp_name}/$exp_date` ，该文件夹下自动生成`submission.json`，用户只需提交该文件。

在[如何运行](/docs/zh_cn/user_guide/how_to_run.md)中有保存位置的说明。

`submission.json`文件格式如下：

```text
## 每个学科内部的键名是数据集中的"id"字段
{
    "banking_practitioner_qualification_certificate": {
        "0": "A",
        "1": "B",
        "2": "B",
        ...
    },
    
    "学科名称":{
    "0":"答案1",
    "1":"答案2",
    ...
    }
    ....
}
```

您可以将生成的`submission.json`文件以邮件形式提交到zhang.liwen@shufe.edu.cn。

### 引用

```bibtex
@misc{2308.09975,
Author = {Liwen Zhang and Weige Cai and Zhaowei Liu and Zhi Yang and Wei Dai and Yujie Liao and Qianru Qin and Yifei Li and Xingyu Liu and Zhiqiang Liu and Zhoufan Zhu and Anbo Wu and Xin Guo and Yun Chen},
Title = {FinEval: A Chinese Financial Domain Knowledge Evaluation Benchmark for Large Language Models},
Year = {2023},
Eprint = {arXiv:2308.09975},
}
```
